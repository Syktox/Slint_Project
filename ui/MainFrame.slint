component HangmanVisuals inherits Rectangle {
   in property <int> fehler_anzahl: 0;
    width: 250px;
    height: 250px;

    // Bodenplatte
    Rectangle {
        y: 230px; height: 10px; width: 180px;
        background: #444;
    }

    // Galgen-Pfosten
    Rectangle {
        x: 40px; y: 20px; width: 8px; height: 210px;
        background: #444;
        visible: fehler_anzahl >= 1;
    }

    // Galgen-Querbalken
    Rectangle {
        x: 40px; y: 20px; width: 100px; height: 8px;
        background: #444;
        visible: fehler_anzahl >= 2;
    }

    // Das Seil
    Rectangle {
        x: 135px; y: 20px; width: 3px; height: 30px;
        background: #666;
        visible: fehler_anzahl >= 3;
    }

    // DER MENSCH
    // Kopf
    Rectangle {
    x: 80px; y: 40px; width: 40px; height: 40px;
    border-width: 3px; border-color: black;
    // Dieser Wert macht das Quadrat zum Kreis:
    border-radius: 20px; 
    visible: fehler_anzahl >= 2;
}

    // Körper
    Rectangle {
        x: 135px; y: 94px; width: 4px; height: 60px;
        background: black;
        visible: fehler_anzahl >= 5;
    }

    // Arme & Beine (vereinfacht als Kreuze/Linien)
    // Linker Arm
    Rectangle {
        x: 110px; y: 110px; width: 25px; height: 4px;
        background: black;
        visible: fehler_anzahl >= 6;
    }
    // Rechter Arm
    Rectangle {
        x: 139px; y: 110px; width: 25px; height: 4px;
        background: black;
        visible: fehler_anzahl >= 6;
    }
}

export component AppWindow inherits Window {
    min-width: 800px;
    min-height: 600px;
    title: "Main Window";
    
    // Spiel-Logik Variablen
    in-out property <int> fehler: 0;
    in-out property <string> wort_anzeige: "_ _ _ _ _";
    
    // Callback an C++ (wenn ein Buchstabe gedrückt wurde)
    callback buchstabe_getippt(string);

    forward-focus: tastatur_input;

    tastatur_input := FocusScope {
        key-pressed(event) => {
            // event.text enthält den gedrückten Buchstaben
            root.buchstabe_getippt(event.text);
            accept
        }
    }

    VerticalLayout {
        padding: 20px;
        spacing: 20px;
        
        // 1. Die Grafik
        HangmanVisuals { fehler_anzahl: root.fehler; }

        // 2. Das Wort
        Text {
            text: root.wort_anzeige;
            font-size: 30px;
            horizontal-alignment: center;
        }
        
        // 3. Status
        Text {
            text: "Fehler: " + root.fehler + " / 6";
            color: root.fehler > 4 ? red : black;
        }
    }
}